{% extends 'base.html' %}
{% load static %}

{% block title %}Blog - {{site_name}}{% endblock %}

{% block extra_css %}
<style>
    .blog-card {
        transition: all 0.3s ease;
    }
    .blog-card:hover {
        transform: translateY(-10px);
        box-shadow: 0 20px 40px rgba(0,0,0,0.1);
    }
    .tag-cloud .tag {
        transition: all 0.3s ease;
    }
    .tag-cloud .tag:hover {
        transform: scale(1.1);
    }
</style>
{% endblock %}

{% block content %}
<section class="py-20 bg-gradient-to-br from-blue-50 via-white to-purple-50">
    <div class="container mx-auto px-4">
        <!-- Header -->
        <div class="text-center mb-16" data-aos="fade-up">
            <div class="inline-flex items-center px-4 py-2 bg-gradient-to-r from-blue-100 to-purple-100 rounded-full text-sm font-medium text-blue-800 mb-4">
                <i class="fas fa-blog mr-2"></i>
                {{site_name}} Blog
            </div>
            <h1 class="text-4xl md:text-5xl font-bold mb-6 bg-gradient-to-r from-gray-800 via-blue-600 to-purple-600 bg-clip-text text-transparent">
                Latest Insights & Tips
            </h1>
            <p class="text-xl text-gray-600 max-w-3xl mx-auto leading-relaxed">
                Stay updated with the latest web development trends, tips, and insights from our expert team.
            </p>
        </div>

        <!-- Navigation -->
        <div class="text-center mb-12" data-aos="fade-up" data-aos-delay="50">
            <nav class="inline-flex bg-white rounded-full p-2 shadow-lg">
                <a href="{% url 'core:blog_home' %}" class="px-6 py-2 bg-blue-500 text-white rounded-full font-medium">Home</a>
                <a href="{% url 'core:blog_list' %}" class="px-6 py-2 text-gray-600 hover:text-blue-500 rounded-full font-medium transition-colors">All Posts</a>
                <a href="{% url 'core:blog_tags' %}" class="px-6 py-2 text-gray-600 hover:text-blue-500 rounded-full font-medium transition-colors">Browse Tags</a>
            </nav>
        </div>

        <!-- Featured Posts -->
        {% if featured_posts %}
        <div class="mb-16" data-aos="fade-up" data-aos-delay="100">
            <h2 class="text-2xl font-bold mb-8 text-gray-800">Featured Posts</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                {% for post in featured_posts %}
                <article class="blog-card bg-white rounded-2xl overflow-hidden shadow-lg">
                    {% if post.featured_image %}
                    <div class="h-48 bg-gradient-to-br from-blue-400 to-purple-500 relative overflow-hidden">
                        <img src="{{ post.featured_image.url }}" alt="{{ post.title }}" class="w-full h-full object-cover">
                        <div class="absolute top-4 left-4">
                            <span class="bg-yellow-400 text-yellow-900 px-3 py-1 rounded-full text-xs font-bold">Featured</span>
                        </div>
                    </div>
                    {% else %}
                    <div class="h-48 bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center relative">
                        <i class="fas fa-blog text-white text-4xl"></i>
                        <div class="absolute top-4 left-4">
                            <span class="bg-yellow-400 text-yellow-900 px-3 py-1 rounded-full text-xs font-bold">Featured</span>
                        </div>
                    </div>
                    {% endif %}
                    
                    <div class="p-6">
                        <!-- Enhanced Tags -->
                        <div class="flex flex-wrap gap-2 mb-4">
                            {% include 'core/components/enhanced_tags.html' with tags=post.tags.all style='outline' %}
                        </div>
                        
                        <h3 class="text-xl font-bold mb-3 text-gray-800 hover:text-blue-600 transition-colors">
                            <a href="{% url 'core:blog_detail' post.slug %}">{{ post.title }}</a>
                        </h3>
                        
                        <p class="text-gray-600 mb-4 line-clamp-3">{{ post.excerpt }}</p>
                        
                        <div class="flex items-center justify-between">
                            <div class="flex items-center space-x-3">
                                {% if post.get_author_image %}
                                    <img src="{{ post.get_author_image }}" alt="{{ post.author.get_full_name|default:post.author.username }}" class="w-8 h-8 rounded-full object-cover border-2 border-gray-200">
                                {% else %}
                                    <div class="w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center">
                                        <span class="text-white text-sm font-bold">{{ post.get_author_avatar }}</span>
                                    </div>
                                {% endif %}
                                <div class="text-sm">
                                    <p class="font-medium text-gray-800">{{ post.author.get_full_name|default:post.author.username }}</p>
                                    <p class="text-gray-500">{{ post.publish_date|date:"M d, Y" }}</p>
                                </div>
                            </div>
                            
                            <a href="{% url 'core:blog_detail' post.slug %}" class="text-blue-600 hover:text-blue-800 font-medium transition-colors">
                                Read More <i class="fas fa-arrow-right ml-1"></i>
                            </a>
                        </div>
                    </div>
                </article>
                {% endfor %}
            </div>
        </div>
        {% endif %}

        <!-- Recent Posts -->
        <div data-aos="fade-up" data-aos-delay="200">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-2xl font-bold text-gray-800">Recent Posts</h2>
                <a href="{% url 'core:blog_list' %}" class="text-blue-600 hover:text-blue-800 font-medium transition-colors">
                    View All Posts <i class="fas fa-arrow-right ml-1"></i>
                </a>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                {% for post in recent_posts %}
                <article class="blog-card bg-white rounded-2xl overflow-hidden shadow-lg">
                    {% if post.featured_image %}
                    <div class="h-48 bg-gradient-to-br from-gray-400 to-gray-600 relative overflow-hidden">
                        <img src="{{ post.featured_image.url }}" alt="{{ post.title }}" class="w-full h-full object-cover">
                    </div>
                    {% else %}
                    <div class="h-48 bg-gradient-to-br from-gray-400 to-gray-600 flex items-center justify-center">
                        <i class="fas fa-blog text-white text-4xl"></i>
                    </div>
                    {% endif %}
                    
                    <div class="p-6">
                        <!-- Enhanced Tags -->
                        <div class="flex flex-wrap gap-2 mb-4">
                            {% include 'core/components/enhanced_tags.html' with tags=post.tags.all style='outline' %}
                        </div>
                        
                        <h3 class="text-xl font-bold mb-3 text-gray-800 hover:text-blue-600 transition-colors">
                            <a href="{% url 'core:blog_detail' post.slug %}">{{ post.title }}</a>
                        </h3>
                        
                        <p class="text-gray-600 mb-4 line-clamp-3">{{ post.excerpt }}</p>
                        
                        <div class="flex items-center justify-between">
                            <div class="flex items-center space-x-3">
                                {% if post.get_author_image %}
                                    <img src="{{ post.get_author_image }}" alt="{{ post.author.get_full_name|default:post.author.username }}" class="w-8 h-8 rounded-full object-cover border-2 border-gray-200">
                                {% else %}
                                    <div class="w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center">
                                        <span class="text-white text-sm font-bold">{{ post.get_author_avatar }}</span>
                                    </div>
                                {% endif %}
                                <div class="text-sm">
                                    <p class="font-medium text-gray-800">{{ post.author.get_full_name|default:post.author.username }}</p>
                                    <p class="text-gray-500">{{ post.publish_date|date:"M d, Y" }}</p>
                                </div>
                            </div>
                            
                            <a href="{% url 'core:blog_detail' post.slug %}" class="text-blue-600 hover:text-blue-800 font-medium transition-colors">
                                Read More <i class="fas fa-arrow-right ml-1"></i>
                            </a>
                        </div>
                    </div>
                </article>
                {% endfor %}
            </div>
        </div>

        <!-- Popular Tags -->
        {% if popular_tags %}
        <div class="mt-16 text-center" data-aos="fade-up" data-aos-delay="300">
            <h3 class="text-xl font-bold mb-6 text-gray-800">Popular Tags</h3>
            <div class="tag-cloud flex flex-wrap justify-center gap-3">
                {% for tag in popular_tags %}
                <a href="{% url 'core:blog_list' %}?tag={{ tag.slug }}" 
                   class="tag px-4 py-2 rounded-full font-medium transition-all duration-300 hover:shadow-lg"
                   style="background-color: {{ tag.color }}20; color: {{ tag.color }}; border: 2px solid {{ tag.color }}30;">
                    {{ tag.name }}
                </a>
                {% endfor %}
            </div>
        </div>
        {% endif %}

        <!-- CTA Section -->
        <div class="mt-16 bg-gradient-to-r from-blue-600 to-purple-600 rounded-2xl p-8 text-center text-white" data-aos="fade-up" data-aos-delay="400">
            <h3 class="text-2xl font-bold mb-4">Stay Updated</h3>
            <p class="text-blue-100 mb-6">Subscribe to our newsletter for the latest web development insights and tips.</p>
            <div class="max-w-md mx-auto flex gap-3">
                <input type="email" placeholder="Your email address" class="flex-grow px-4 py-3 rounded-lg text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-300">
                <button class="bg-white text-blue-600 px-6 py-3 rounded-lg font-medium hover:bg-gray-100 transition-colors">
                    Subscribe
                </button>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
// Line clamp utility for older browsers
document.addEventListener('DOMContentLoaded', function() {
    const elements = document.querySelectorAll('.line-clamp-3');
    elements.forEach(el => {
        if (el.scrollHeight > el.clientHeight) {
            el.style.overflow = 'hidden';
            el.style.display = '-webkit-box';
            el.style.webkitLineClamp = '3';
            el.style.webkitBoxOrient = 'vertical';
        }
    });
});
</script>
{% endblock %}
